

############################
# Extarction de la base Paris
############################

# sirenParis <- read.csv2("C:/Users/jujud/Documents/Dataviz/Siren/sirc-17804_9075_14209_201612_L_M_20170104_171522721.csv")
# sirenParis <- sirenParis[sirenParis$DEPET==75,]

sirenParis <- read.csv2("C:/Users/jujud/Documents/Dataviz/Siren/SIRC_L_M_201612_75.csv")
sirenParis$Arrondissement <- as.numeric(as.character(substr(sirenParis$codpos,4,5)))

############################
# Exploitation de la base
############################


# Restauration
restauration <- sirenParis[substr(sirenParis$apet700,1,3)=="561",]
restauration$apet700 <- as.character(restauration$apet700)
table(restauration$apet700)
round(100*prop.table(table(restauration$apet700)))
table(restauration$Arrondissement, restauration$apet700)
round(100*prop.table(table(restauration$Arrondissement, restauration$apet700),1))
round(100*prop.table(table(restauration$Arrondissement, restauration$apet700),2))
round(100*prop.table(table(restauration$Arrondissement, restauration$tefet),1)) #Effectif de l'etablissement

# Activite en salle de sport
sportSalle <- sirenParis[substr(sirenParis$apet700,1,3)=="931",]
sportSalle$apet700 <- as.character(sportSalle$apet700)
table(sportSalle$apet700)
round(100*prop.table(table(sportSalle$apet700)))
table(sportSalle$Arrondissement, sportSalle$apet700)
round(100*prop.table(table(sportSalle$Arrondissement, sportSalle$apet700),1))
round(100*prop.table(table(sportSalle$Arrondissement, sportSalle$apet700),2))


# Services Ã  la personne
serviceAlaPersonne <- sirenParis[substr(sirenParis$apet700,1,3)=="96",]
